<%@page import="java.util.Random"%>
<%@page import="demo2.Book"%>
<%@page import="java.util.List"%>
<%@page import="demo2.BookDao"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html lang="ko">
<head>
  <title>Bootstrap Example</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container">
	<%
		String[] labels = {"default", "primary", "success","info","warning","danger"};
		BookDao bookDao = new BookDao();
		List<Book> books = bookDao.getAllBooks();
	%>
	<h3 class="well">현재 판매중인 책들</h3>
	<p>
	<%
		Random random = new Random();	
		for(Book book : books){
			int num = random.nextInt(6);
	%>
		<span class="label label-<%=labels[num]%>" style="cursor: pointer;" id="book-no-<%=book.getNo()%>"><%=book.getTitle() %></span>
	<%}	%>
	</p>
	<div class="panel panel-info">
		<div class="panel-heading" id="book-title"></div>
		<table class="table table-bordered">
			<colgroup>
				<col width="10%">
				<col width="30%">
				<col width="10%">
				<col width="50%">
			</colgroup>
			<tbody>
				<tr>
					<th>번호</th><td id="book-no"></td>
					<th>제목</th><td id="book-title-2"></td>
				</tr>
				<tr>
					<th>저자</th><td id="book-author"></td>
					<th>출판사</th><td id="book-publisher"></td>
				</tr>
				<tr>
					<th>가격</th><td id="book-price"></td>
					<th>할인여부</th><td id="book-discount"></td>
				</tr>
				<tr>
					<th>설명</th><td colspan="3">꼭 사라 빨리 사라 두권 사라</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
</body>
<script type="text/javascript">
	var spanNodeList = document.getElementByTagName("span");
	for(var i = 0; i<spanNodeList.length;i++){
		var span = spanNodeList.item(i);
		
		span.addEventListener("click", function(event){
			val Label = event.target.id.replace("book-no-","");
			
			alert(bookNo);
		});
	}
</script>
</html>